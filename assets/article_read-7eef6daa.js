import{o as I,c as K,n as b,d as U,r as m,a as F,b as G,e as s,u as e,w as i,v as a,f as t,t as S,g as u,i as B,h as Y,j as y,k as J,l as O,m as Q,$ as L,p as R,q as X,s as Z}from"./symbols-2aef84fb.js";import{_ as ee,n as D,c as te,a as ne}from"./variable-a4637b51.js";import{C as T,_ as oe}from"./index-d7ccc6e4.js";import{_ as ie}from"./index.vue_vue_type_script_setup_true_lang-a463ac3c.js";import{_ as se}from"./index.vue_vue_type_script_setup_true_lang-60c3ca11.js";import{u as ae}from"./use-media-7b12d379.js";import{s as le,A as re,H as ce}from"./index-a57d630f.js";let E;const de=window.innerHeight;let N,W=0;const ue={data(){return{reminderW:0}},mounted(){E=document.documentElement.scrollHeight,N=E-de,window.addEventListener("scroll",()=>{window.requestAnimationFrame(this.paintReminder)})},methods:{paintReminder(){W=document.body.scrollTop,this.reminderW=W/N*100}}};function pe(V,f,v,p,r,h){return I(),K("div",{class:"ignore-indicator",style:b({width:`${r.reminderW}%`})},null,4)}const me=ee(ue,[["render",pe]]),_e={class:"wrapper"},fe={class:"ignore-article-container"},ve={class:"ignore-header-container"},he={class:"ignore-title"},ge={class:"author"},we={class:"ignore-article-content"},ye={class:"ignore-check"},be=t("p",{class:"ignore-remind"},"请填写姓名，然后进行人脸拍照，提交审核通过后即可通过输入姓名访问",-1),xe={class:"ignore-visitor"},Ce={class:"ignore-face-area"},$e={class:"flex-double-center media-border"},ke={id:"video",width:"240",height:"180",autoplay:""},He={id:"canvas",width:"240",height:"180"},Me={class:"flex-between-center ignore-snap"},Ae={class:"flex-between-center ignore-btn-area"},Se=U({__name:"index",setup(V){const f=B(L),v=B(R),p=m([]),r=m(!0),h=m(!1),x=m(""),{visitor:g,action:c,operator:j,snap:C,handleCancel:q,handleSubmit:z,handleCheck:$,getMedia:k,takePhoto:H,cancelSnap:M,confirmSnap:A,computedWidth:w}=ae();F(()=>{const d=window.location.search.substring(1),l=window.decodeURIComponent(window.atob(d)).split("_");p.value=l,document.getElementsByTagName("title")[0].innerHTML=l[2],P(l[1])}),G(()=>{r.value=!1});const P=async d=>{const n=Math.ceil(parseInt(d)/10);v&&f&&(await v.get(f[`getArticleContent${n}`])).data.articleList.forEach((o,Be)=>{o.id==d&&(x.value=o.content)})};return(d,n)=>{const l=Y("dompurify-html");return I(),K("div",_e,[s(e(me)),i(s(e(ie),{"nav-default-list":e(D)},null,8,["nav-default-list"]),[[a,e(w)]]),t("div",fe,[t("div",ve,[t("h2",he,S(p.value[2]),1),t("p",ge,"作者："+S(p.value[3]),1)]),i(t("div",we,null,512),[[l,x.value]])]),i(s(e(r),null,null,512),[[a,r.value]]),s(e(oe),{visible:h.value,"show-close":"",width:"500px",onClose:n[6]||(n[6]=o=>h.value=!1)},{title:u(()=>[y("身份验证")]),footer:u(()=>[t("div",Ae,[s(e(T),{type:"ghost",onClick:e(q)},{default:u(()=>[y("取消")]),_:1},8,["onClick"]),s(e(T),{type:"primary",onClick:e(z)},{default:u(()=>[y("提交")]),_:1},8,["onClick"])])]),default:u(()=>[t("div",ye,[be,t("div",xe,[i(t("input",{id:"name","onUpdate:modelValue":n[0]||(n[0]=o=>O(g)?g.value=o:null),type:"text",placeholder:"点击输入姓名",onKeyup:n[1]||(n[1]=Q(X((...o)=>e($)&&e($)(...o),["exact"]),["enter"]))},null,544),[[J,e(g),void 0,{lazy:!0}]])]),t("div",Ce,[i(t("i",{class:"iconfont icon-camera1 ignore-face-btn",title:"开启摄像头",onClick:n[2]||(n[2]=(...o)=>e(k)&&e(k)(...o))},null,512),[[a,!e(C)]]),t("div",$e,[i(t("video",ke,null,512),[[a,!e(c)]]),i(t("canvas",He,null,512),[[a,e(c)]])]),i(t("div",Me,[t("i",{class:"iconfont icon-fanhui ignore-snap-cancel",style:b({opacity:e(c)?1:""}),title:"重新拍摄",onClick:n[3]||(n[3]=(...o)=>e(M)&&e(M)(...o))},null,4),i(t("i",{class:"iconfont icon-ios-radio-button-on ignore-snap-action",title:"点击拍照",onClick:n[4]||(n[4]=(...o)=>e(H)&&e(H)(...o))},null,512),[[a,!e(c)]]),t("i",{class:"iconfont icon-duihao ignore-snap-confirm",style:b({opacity:e(c)?1:""}),title:"确认使用",onClick:n[5]||(n[5]=(...o)=>e(A)&&e(A)(...o))},null,4)],512),[[a,e(C)&&!e(j)]])])])]),_:1},8,["visible"]),i(s(e(se),{"nav-list":e(D)},null,8,["nav-list"]),[[a,!e(w)]]),s(e(ne),{year:e(te),"is-mobile":!e(w)},null,8,["year","is-mobile"])])}}});const _=Z(Se);le(_);_.provide(L,re);_.provide(R,ce);_.mount("#app");
