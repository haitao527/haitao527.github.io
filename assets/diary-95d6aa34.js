import{d as K,r as g,a as O,b as V,L as z,c as l,w as c,v as _,u as o,e as h,f as i,G as k,H as M,o as d,t as S,j as P,i as $,$ as Y,p as j,z as U,h as W,s as F}from"./symbols-2aef84fb.js";import{c as B,n as A,t as G,a as I}from"./variable-a4637b51.js";import{t as q}from"./throttle-5cadf59e.js";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang-a463ac3c.js";import{_ as Q}from"./index.vue_vue_type_script_setup_true_lang-60c3ca11.js";import{L as R}from"./index-cde9dc1e.js";import{u as X}from"./use-media-7b12d379.js";import{s as Z,A as ee,H as te}from"./index-a57d630f.js";const oe={class:"ignore-diary-container"},se={class:"flex-double-center ignore-time-line-container"},ne=["onClick"],ie={class:"ignore-time-line-text"},ae=i("span",{class:"ignore-time-line-space"}," ",-1),re={class:"ignore-section-container"},le={class:"ignore-date"},ce={class:"ignore-mood"},de=["src"],me={class:"ignore-diary-content"},ue=K({__name:"index",setup(fe){let a=1;const m=7;let H=!1,y=0;const x=$(Y),D=$(j),w=$(U),L=g([]),u=g([]),f=g(!0),N=g(null),{computedWidth:p}=X(),T=async e=>{if(D&&x){const t=await D.get(x[`getDiary${e}`]);L.value=t.data.articleList.reverse(),u.value=t.data.articleList.slice((a-1)*m,a*m)}},C=()=>{const e=window.pageYOffset,t=e-y;if(y=e,t<=0)return!1;if(!H){const s=Math.max(document.body.scrollHeight,document.body.offsetHeight),n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,r=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;if(s-n-r<50){a+=1;const b=L.value.slice((a-1)*m,a*m);if(b.length==0){H=!0,w==null||w("列表已经全部加载完成");return}f.value=!0,N.value=window.setTimeout(()=>{f.value=!1,u.value=[...u.value,...b]},500)}}},E=e=>{let t;const s=e.title.split("/");return Number(s[0])>2016||Number(s[0])==2016&&(Number(s[1])>8||Number(s[1])==8&&Number(s[2])>=28)?t="/img/face/"+e.mood+".gif":t="/img/imgmood/"+e.mood+".png",t};return O(()=>{T(B)}),V(()=>{window.onscroll=q(C,1e3),f.value=!1,y=window.pageYOffset}),z(()=>{N.value=null}),(e,t)=>{const s=W("dompurify-html");return d(),l("div",oe,[c(h(o(J),{"nav-default-list":o(A)},null,8,["nav-default-list"]),[[_,o(p)]]),c(i("ul",se,[(d(!0),l(k,null,M(o(G),(n,r)=>(d(),l("li",{key:`time-${r}`,class:"ignore-time-line-item",onClick:b=>T(n)},[i("span",ie,S(n),1),ae],8,ne))),128))],512),[[_,o(p)]]),i("div",re,[(d(!0),l(k,null,M(u.value,(n,r)=>(d(),l("section",{key:`diary-item-${r}`,class:"flex-column-around-start ignore-diary-item"},[i("h2",le,S(n.title),1),i("p",ce,[P("此刻心情："),i("img",{src:E(n),alt:"心情emoji"},null,8,de)]),c(i("div",me,null,512),[[s,n.content]])]))),128))]),c(h(o(R),null,null,512),[[_,f.value]]),c(h(o(Q),{"nav-list":o(A)},null,8,["nav-list"]),[[_,!o(p)]]),h(o(I),{year:o(B),"is-mobile":!o(p)},null,8,["year","is-mobile"])])}}});const v=F(ue);Z(v);v.provide(Y,ee);v.provide(j,te);v.mount("#app");
