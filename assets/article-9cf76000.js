import{d as Q,r as d,a as X,b as Z,I as ee,c as x,w as i,v as a,u as e,e as l,f as t,F as te,G as oe,g as u,i as k,o as C,t as V,h as $,j as ne,k as se,l as ie,n as z,$ as O,m as P,y as ae,p as le,q as re}from"./symbols-a5750b6c.js";import{a as ce}from"./imgs-6e30657b.js";import{n as E,a as de,r as ue}from"./variable-24519989.js";import{t as pe}from"./throttle-5cadf59e.js";import{F as N,_ as fe}from"./index-a05cfb3c.js";import{_ as me}from"./index.vue_vue_type_script_setup_true_lang-4be7f323.js";import{_ as _e}from"./index.vue_vue_type_script_setup_true_lang-62a30e59.js";import{L as ge}from"./index-5811b485.js";import{u as he}from"./use-media-ea13ca43.js";import{s as ve,A as we,H as ye}from"./index-10f78ce3.js";const be={class:"wrapper"},xe={class:"article-container"},ke={class:"ignore-title-author"},Ce={class:"ignore-title"},$e={class:"ignore-author"},He={class:"flex-between-start content-container"},Le={class:"flex-column-between-start ignore-des-link"},Te=["innerHTML"],Me=["href"],Se={"aspect-ratio":"",class:"ignore-article-img"},De=["src"],Ue={class:"ignore-check"},Ae=t("p",{class:"ignore-remind"},"请填写姓名，然后进行人脸拍照，提交审核通过后即可通过输入姓名访问",-1),Be={class:"ignore-visitor"},Ie={class:"ignore-face-area"},Ke={class:"flex-double-center media-border"},Fe={id:"video",width:"240",height:"180",autoplay:""},Ve={id:"canvas",width:"240",height:"180"},ze={class:"flex-between-center ignore-snap"},Ee={class:"flex-between-center ignore-btn-area"},Ne=Q({__name:"index",setup(Oe){let r=1;const p=7;let H=!1,g=0;const{visitor:h,action:c,operator:R,snap:L,handleCancel:Y,handleSubmit:j,handleCheck:T,getMedia:M,takePhoto:S,cancelSnap:D,confirmSnap:U,computedWidth:v}=he(),A=k(O),B=k(P),w=k(ae),I=d([]),f=d([]),m=d(!0),y=d(!1),K=d(null),W=async()=>{if(A&&B){const s=await B.get(A.getArticleList);I.value=s.data.articleList.reverse(),f.value=s.data.articleList.slice((r-1)*p,r*p)}};X(()=>{W()}),Z(()=>{window.onscroll=pe(q,1e3),m.value=!1,g=window.pageYOffset}),ee(()=>{K.value=null});const q=()=>{const s=window.pageYOffset,n=s-g;if(g=s,n<=0)return!1;if(!H){const o=Math.max(document.body.scrollHeight,document.body.offsetHeight),b=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,J=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;if(o-b-J<50){r+=1;const F=I.value.slice((r-1)*p,r*p);if(F.length==0){H=!0,w==null||w("列表已经全部加载完成");return}m.value=!0,K.value=window.setTimeout(()=>{m.value=!1,f.value=[...f.value,...F]},500)}}},G=s=>{const n="target="+new Date().getTime()+"_"+s.id+"_"+s.title+"_"+s.author,o=window.btoa(window.encodeURIComponent(n));return`${ue("article_read")}?${o}`};return(s,n)=>(C(),x("div",be,[i(l(e(me),{"nav-default-list":e(E),onCallCheckId:n[0]||(n[0]=o=>y.value=!0)},null,8,["nav-default-list"]),[[a,e(v)]]),t("div",xe,[(C(!0),x(te,null,oe(f.value,(o,b)=>(C(),x("section",{key:`article-item-${b}`,class:"flex-column-around-start ignore-article-item"},[t("div",ke,[t("h2",Ce,V(o.title),1),t("p",$e,"作者："+V(o.author),1)]),t("div",He,[t("div",Le,[t("div",{class:"ignore-des",innerHTML:o.description},null,8,Te),t("a",{class:"ignore-read-more",href:G(o)},"阅读全文 >>",8,Me)]),t("div",Se,[t("img",{src:`${e(ce).path}${o.id}.png`,class:"aspect-ratio-img",alt:"配文图片"},null,8,De)])])]))),128))]),i(l(e(ge),null,null,512),[[a,m.value]]),l(e(fe),{visible:y.value,"show-close":"",width:"500px",onClose:n[7]||(n[7]=o=>y.value=!1)},{title:u(()=>[$(" 身份验证 ")]),footer:u(()=>[t("div",Ee,[l(e(N),{type:"ghost",onClick:e(Y)},{default:u(()=>[$("取消")]),_:1},8,["onClick"]),l(e(N),{type:"primary",onClick:e(j)},{default:u(()=>[$("提交")]),_:1},8,["onClick"])])]),default:u(()=>[t("div",Ue,[Ae,t("div",Be,[i(t("input",{id:"name","onUpdate:modelValue":n[1]||(n[1]=o=>se(h)?h.value=o:null),type:"text",placeholder:"点击输入姓名",onKeyup:n[2]||(n[2]=ie(le((...o)=>e(T)&&e(T)(...o),["exact"]),["enter"]))},null,544),[[ne,e(h),void 0,{lazy:!0}]])]),t("div",Ie,[i(t("i",{class:"iconfont icon-camera1 ignore-face-btn",title:"开启摄像头",onClick:n[3]||(n[3]=(...o)=>e(M)&&e(M)(...o))},null,512),[[a,!e(L)]]),t("div",Ke,[i(t("video",Fe,null,512),[[a,!e(c)]]),i(t("canvas",Ve,null,512),[[a,e(c)]])]),i(t("div",ze,[t("i",{class:"iconfont icon-fanhui ignore-snap-cancel",style:z({opacity:e(c)?1:""}),title:"重新拍摄",onClick:n[4]||(n[4]=(...o)=>e(D)&&e(D)(...o))},null,4),i(t("i",{class:"iconfont icon-ios-radio-button-on ignore-snap-action",title:"点击拍照",onClick:n[5]||(n[5]=(...o)=>e(S)&&e(S)(...o))},null,512),[[a,!e(c)]]),t("i",{class:"iconfont icon-duihao ignore-snap-confirm",style:z({opacity:e(c)?1:""}),title:"确认使用",onClick:n[6]||(n[6]=(...o)=>e(U)&&e(U)(...o))},null,4)],512),[[a,e(L)&&!e(R)]])])])]),_:1},8,["visible"]),i(l(e(_e),{"nav-list":e(E)},null,8,["nav-list"]),[[a,!e(v)]]),l(e(de),{"is-mobile":!e(v)},null,8,["is-mobile"])]))}});const _=re(Ne);ve(_);_.provide(O,we);_.provide(P,ye);_.mount("#app");
