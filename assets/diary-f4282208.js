import{d as K,r as _,a as O,b as V,L as z,c as l,w as c,v as h,u as o,e as v,f as i,G as k,H as M,o as m,t as S,j as P,i as $,$ as Y,p as j,z as U,h as W,s as F}from"./symbols-2aef84fb.js";import{y as G}from"./vue-dompurify-html-d8dd7e5d.js";import{c as B,n as A,t as I,a as q}from"./variable-a4637b51.js";import{t as J}from"./throttle-5cadf59e.js";import{_ as Q}from"./index.vue_vue_type_script_setup_true_lang-a463ac3c.js";import{_ as R}from"./index.vue_vue_type_script_setup_true_lang-60c3ca11.js";import{L as X}from"./index-cde9dc1e.js";import{u as Z}from"./use-media-7b12d379.js";import{s as ee,A as te,H as oe}from"./index-9a522eb6.js";const se={class:"ignore-diary-container"},ne={class:"flex-double-center ignore-time-line-container"},ie=["onClick"],ae={class:"ignore-time-line-text"},re=i("span",{class:"ignore-time-line-space"}," ",-1),le={class:"ignore-section-container"},ce={class:"ignore-date"},me={class:"ignore-mood"},de=["src"],ue={class:"ignore-diary-content"},fe=K({__name:"index",setup(pe){let a=1;const u=7;let H=!1,y=0;const x=$(Y),D=$(j),w=$(U),L=_([]),f=_([]),p=_(!0),N=_(null),{computedWidth:g}=Z(),T=async e=>{if(D&&x){const t=await D.get(x[`getDiary${e}`]);L.value=t.data.articleList.reverse(),f.value=t.data.articleList.slice((a-1)*u,a*u)}},C=()=>{const e=window.pageYOffset,t=e-y;if(y=e,t<=0)return!1;if(!H){const s=Math.max(document.body.scrollHeight,document.body.offsetHeight),n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,r=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;if(s-n-r<50){a+=1;const b=L.value.slice((a-1)*u,a*u);if(b.length==0){H=!0,w==null||w("列表已经全部加载完成");return}p.value=!0,N.value=window.setTimeout(()=>{p.value=!1,f.value=[...f.value,...b]},500)}}},E=e=>{let t;const s=e.title.split("/");return Number(s[0])>2016||Number(s[0])==2016&&(Number(s[1])>8||Number(s[1])==8&&Number(s[2])>=28)?t="/img/face/"+e.mood+".gif":t="/img/imgmood/"+e.mood+".png",t};return O(()=>{T(B)}),V(()=>{window.onscroll=J(C,1e3),p.value=!1,y=window.pageYOffset}),z(()=>{N.value=null}),(e,t)=>{const s=W("dompurify-html");return m(),l("div",se,[c(v(o(Q),{"nav-default-list":o(A)},null,8,["nav-default-list"]),[[h,o(g)]]),c(i("ul",ne,[(m(!0),l(k,null,M(o(I),(n,r)=>(m(),l("li",{key:`time-${r}`,class:"ignore-time-line-item",onClick:b=>T(n)},[i("span",ae,S(n),1),re],8,ie))),128))],512),[[h,o(g)]]),i("div",le,[(m(!0),l(k,null,M(f.value,(n,r)=>(m(),l("section",{key:`diary-item-${r}`,class:"flex-column-around-start ignore-diary-item"},[i("h2",ce,S(n.title),1),i("p",me,[P("此刻心情："),i("img",{src:E(n),alt:"心情emoji"},null,8,de)]),c(i("div",ue,null,512),[[s,n.content]])]))),128))]),c(v(o(X),null,null,512),[[h,p.value]]),c(v(o(R),{"nav-list":o(A)},null,8,["nav-list"]),[[h,!o(g)]]),v(o(q),{year:o(B),"is-mobile":!o(g)},null,8,["year","is-mobile"])])}}});const d=F(fe);ee(d);d.use(G);d.provide(Y,te);d.provide(j,oe);d.mount("#app");
